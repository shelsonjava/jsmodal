/*!
 * jsModal - A pure JavaScript modal dialog engine v1.0c
 * http://jsmodal.com/
 *
 * Author: Henry Rune Tang Kai <henry@henrys.se>
 *
 * (c) Copyright 2013 Henry Tang Kai.
 *
 * License: http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 2013-6-16
 */
var Modal=function(){var b={},q,r,j,m,s,n,d=document.createElement("div"),a=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),p;b.open=function(c){q=c.width||"auto";r=c.height||"auto";j=c.lock||!1;m=c.hideClose||!1;s=c.draggable||!1;n=c.closeAfter||0;c.content&&!c.ajaxContent?g.innerHTML=c.content:c.ajaxContent&&!c.content?(a.className="modal-loading",b.ajax(c.ajaxContent,function(a){g.innerHTML=a})):g.innerHTML="";a.style.width= q;a.style.height=r;b.center({});if(j||m)h.style.visibility="hidden";d.style.visibility="visible";a.style.visibility="visible";document.onkeypress=function(a){27===a.keyCode&&!0!==j&&b.close()};h.onclick=function(){if(m)return!1;b.close()};d.onclick=function(){if(j)return!1;b.close()};window.onresize=function(){b.center({})};s?(e.style.cursor="move",e.onmousedown=function(a){b.drag(a);return!1}):e.onmousedown=function(){return!1};0<n&&(p=setTimeout(function(){b.close()},1E3*n))};b.drag=function(c){var b= void 0!==window.event?window.event.clientX:c.clientX,k=void 0!==window.event?window.event.clientY:c.clientY,f=b-a.offsetLeft,d=k-a.offsetTop;document.onmousemove=function(c){b=void 0!==window.event?window.event.clientX:c.clientX;k=void 0!==window.event?window.event.clientY:c.clientY;a.style.left=0<b-f?b-f+"px":"0px";a.style.top=0<k-d?k-d+"px":"0px";document.onmouseup=function(){window.document.onmousemove=null}}};b.ajax=function(c,b){var d,f=!1,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")}, function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP")}];for(d=0;d<e.length;d+=1){try{f=e[d]()}catch(g){}if(!1!==f)break}f.open("GET",c,!0);f.onreadystatechange=function(){4===f.readyState&&(b(f.responseText),a.removeAttribute("class"))};f.send(null)};b.close=function(){g.innerHTML="";d.setAttribute("style","");d.style.cssText="";d.style.visibility="hidden";a.setAttribute("style","");a.style.cssText="";a.style.visibility="hidden";e.style.cursor= "default";h.setAttribute("style","");h.style.cssText="";p&&clearTimeout(p)};b.center=function(c){var b=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),e=Math.max(a.clientWidth,a.offsetWidth),f=Math.max(a.clientHeight,a.offsetHeight),g=0,h=0,j=0,l=0;"number"===typeof window.innerWidth?(g=window.innerWidth,h=window.innerHeight):document.documentElement&&document.documentElement.clientWidth&&(g=document.documentElement.clientWidth,h=document.documentElement.clientHeight);"number"=== typeof window.pageYOffset?(l=window.pageYOffset,j=window.pageXOffset):document.body&&document.body.scrollLeft?(l=document.body.scrollTop,j=document.body.scrollLeft):document.documentElement&&document.documentElement.scrollLeft&&(l=document.documentElement.scrollTop,j=document.documentElement.scrollLeft);c.horizontalOnly||(a.style.top=l+h/2-f/2+"px");a.style.left=j+g/2-e/2+"px";d.style.height=b+"px";d.style.width="100%"};d.setAttribute("id","modal-overlay");a.setAttribute("id","modal-container");e.setAttribute("id", "modal-header");g.setAttribute("id","modal-content");h.setAttribute("id","modal-close");e.appendChild(h);a.appendChild(e);a.appendChild(g);d.style.visibility="hidden";a.style.visibility="hidden";window.onload=function(){document.body.appendChild(d);document.body.appendChild(a)};return b}();